/*******************************CompileInfo*********************************
Time:[2024-02-02 04:31:07]
Encoding:[UTF-8]
Version:[COOLANG 1.0.0 beta]
****************************************************************************/
#file(test);
#line(1);

#load(quadratic);
#file(quadratic);
#line(1);
//化简阶段通用的变形
expr:@(0,1,1,1,1){#a*a}{
	return:a^2;
}
expr:@(1,1,1,1,1){#a+a}{
	return:2*a;
}
expr:@(1,1,1,1,1){#a-a}{
	return:0;
}
expr:@(1,1,1,1,1){-#a+a}{
	return:0;
}
expr:@(2,2,2,2,2){0*#a}{
	return:0;
}
expr:@(2,2,2,2,2){#a*0}{
	return:0;
}
expr:@(2,2,2,2,2){$a-immediate:b}{
	if(b==0){
		return:a;
	}else{
		new:tmp = 0-b;
		return:a + tmp;
	}
}

expr:@(1.1,1.1,1.1,1.1,1.1){immediate:a+immediate:b}{
	new:re = a+b;
	return:re;
}
expr:@(1.1,1.1,1.1,1.1,1.1){immediate:a-immediate:b}{
	new:re = a-b;
	return:re;
}
expr:@(1.1,1.1,1.1,1.1,1.1){immediate:a*immediate:b}{
	new:re = a*b;
	return:re;
}
expr:@(1.1,1.1,1.1,1.1,1.1){immediate:a^immediate:b}{
	new:re = a^b;
	return:re;
}


//移项
expr:@(5,0,0,0,0){$a==$?b}{
	return:a-b==0;
}
expr:@(5,0,0,0,0){$a==immediate:ne(0):b}{
	new:tmp = 0-b;
	return:a+tmp==0;
}
expr:@(5,0,0,0,0){immediate:a==$b}{
	if(a == 0){
		return:b==0;
	}else{
		new:tmp = 0-a;
		return:b+tmp==0;
	}
}
//去平方
expr:@(2,0,0,0){(ne(0):#?a + ne(0):#?b)^2}{
	return:a^2+2*a*b+b^2;
}
expr:@(2,0,0,0){(ne(0):#?a - ne(0):#?b)^2}{
	return:a^2+(-2)*a*b+b^2;
}
expr:@(2,0,0,0){($a + 0)^2}{
	return:a^2;
}
expr:@(2,0,0,0){(ne(0):#?a + 0)^2}{
	return:a^2;
}
expr:@(2,0,0,0){(0 + $a)^2}{
	return:a^2;
}
expr:@(2,0,0,0){( 0 - $a)^2}{
	return:a^2;
}
expr:@(2,0,0,0){(ne(0):#a*ne(0):#b)^2}{
	return:a^2*b^2;
}


//去括号
expr:@(0,1,0,0,0){#?a-(#?b+#?c)}{
	return:a-b-c;
}
expr:@(0,1,0,0,0){#?a-(#?b-#?c)}{
	return:a-b+c;
}
expr:@(0,1,0,0,0){#?a+(#?b+#?c)}{
	return:a+b+c;
}
expr:@(0,1,0,0,0){#?a+(#?b-#?c)}{
	return:a+b-c;
}
expr:@(0,1,0,0,0){#?a*(#?b+#?c)}{
	return:a*b+a*c;
}
expr:@(0,1,0,0,0){#?a*(#?b-#?c)}{
	return:a*b-a*c;
}
expr:@(0,1,0,0,0){(#?b+#?c)*#?a}{
	return:b*a+c*a;
}
expr:@(0,1,0,0,0){(#?b-#?c)*#?a}{
	return:b*a-c*a;
}


//加减转换//此步骤将所有减号替换为加号
expr:@(0,0,0.5,0,0){ne(0):#a-immediate:b}{
	new:tmp = 0-b;
        return:a+tmp;
}
expr:@(0,0,1,0,0){#a-$x}{
        return:a+(-1)*x;
}
expr:@(0,0,1,0,0){#a-$x^2}{
        return:a+(-1)*x^2;
}
expr:@(0,0,-2,0,0){-?a*$?x}{
	return:(-a)*x;
}
expr:@(0,0,-0.1,0,0){-a*$x^2}{
	return:(-a)*x^2;
}
expr:@(0,0,-1,0,0){-$x}{
	return:(-1)*x;
}
expr:@(0,0,-0.1,0,0){-$x^2}{
	return:(-1)*x^2;
}


//此步骤将所有常数与变量分离，充分构造 .+b*x     .+b*x^2 	a*x+. 	   a*x^2+.  //a*x==.   a*x^2==.
expr:@(0,0,0,-4,0){$a*$b}{
	return:b*a;
}
expr:@(0,0,0,0.5,0){$x*a}{
	return:a*x;
}
expr:@(0,0,0,0.5,0){#y*$x*a}{
	return:y*a*x;
}
expr:@(0,0,0,1,0){#y*$x^2*a}{
	return:y*a*x^2;
}
expr:@(0,0,0,1.5,0){immediate:a1*(immediate:a2*$x)}{
	new:tmp = (a1*a2);
	return:tmp*x;
}
expr:@(0,0,0,0.5,0){(immediate:a1*$x)*immediate:a2}{
	new:tmp =  (a1*a2);
	return:tmp*x;
}
expr:@(0,0,0,1,0){$x^2*a}{
	return:a*x^2;
}
expr:@(0,0,0,1.5,0){$x*(a*$x)}{
	return:a*x^2;
}

expr:@(0,0,0,0.5,0){(immediate:a1*$x)*(immediate:a2*x)}{
	new:tmp = a1*a2;
	return:tmp*x^2;
}


expr:@(0,0,0,-3,0){#a+$x}{
	return:a+1*x;
}
expr:@(0,0,0,-3,0){$x+#a}{
	return:1*x+a;
}
expr:@(0,0,0,1,0){$x^2+#a}{
	return:1*x^2+a;
}
//降幂排列并化简
expr:@(0,0,0,0,2){immediate:a*$x+immediate:b*$x}{
	new:tmp = a+b;
	return:tmp*x;
}
expr:@(0,0,0,0,2){$y + immediate:a*$x+immediate:b*$x}{
	new:tmp = a+b;
	return:y+ tmp*x;
}
expr:@(0,0,0,0,1){a+$x}{
	return:x+a;
}
expr:@(0,0,0,0,1){$y + a+$x}{
	return:y + x+a;
}
expr:@(0,0,0,0,1){a*$x+b*$x^2}{
	return:b*x^2+a*x;
}
expr:@(0,0,0,0,1){$y + a*$x+b*$x^2}{
	return:y + b*x^2+a*x;
}

expr:@(0,0,0,0,1){a1*$x+a2*x}{
	return:b*x^2+a*x;
}
expr:@(0,0,0,0,-4){$x+$y}{
	return:y+x;
}
expr:@(0,0,0,0,1){a1*$x^2+b1*x+immediate:c1 +  immediate:c2}{
	new:tmp = c1+c2;
	return: a1*x^2+b1*x+tmp;
}
expr:@(0,0,0,0,1){a1*$x^2+immediate:b1*x+c1 +  immediate:b2*x}{
	new:tmp = b1 + b2;
	return: a1*x^2+tmp*x+c1;
}
expr:@(0,0,0,0,1){a1*$x^2+immediate:b1*x+immediate:c1 + (immediate:b2*x+immediate:c2) }{
	new:tmpb = b1 + b2;
	new:tmpc = c1 + c2;
	return: a1*x^2+tmpb*x+tmpc;
}
expr:@(0,0,0,0,1){immediate:a1*$x^2+b1*x+immediate:c1 + (immediate:a2*x^2+immediate:c2) }{
	new:tmpa = a1 + a2;
	new:tmpc = c1 + c2;
	return: tmpa*x^2+b1*x+tmpc;
}
expr:@(0,0,0,0,1){immediate:a1*$x^2+immediate:b1*x+c1 + (immediate:a2*x^2+immediate:b2*x) }{
	new:tmpa = a1 + a2;
	new:tmpb = b1 + b2;
	return: tmpa*x^2+tmpb*x+c1;
}
expr:@(0,0,0,0,1){immediate:a1*$x^2+immediate:b1*x+immediate:c1 + (immediate:a2*x^2+immediate:b2*x+immediate:c2) }{
	new:tmpa = a1 + a2;
	new:tmpb = b1 + b2;
	new:tmpc = c1 + c2;
	
	return: tmpa*x^2+tmpb*x+tmpc;
}
//expr:(0,0,0,1){a1*$x^2+b1*x + (c2) }{
//	return: (a1+a2)*x^2+(b1+b2)*x+(c1+c2);
//}
expr:@(0,0,0,0,1){a1*$x^2+immediate:b1*x + (immediate:b2*x) }{
	new: tmpb = b1+b2;
	return: a1*x^2+tmpb*x;
}
expr:@(0,0,0,0,1){a1*$x^2+immediate:b1*x + (immediate:b2*x+c2) }{
	new: tmpb = b1+b2;
	return: a1*x^2+tmpb*x+c2;
}
expr:@(0,0,0,0,1){immediate:a1*$x^2+b1*x + (immediate:a2*x^2+c2) }{
	new: tmpa = a1+a2;
	return: tmpa*x^2+b1*x+c2;
}
expr:@(0,0,0,0,1){immediate:a1*$x^2+immediate:b1*x + (immediate:a2*x^2+immediate:b2*x) }{
	new: tmpa = a1+a2;
	new: tmpb = b1+b2;
	return: tmpa*x^2+tmpb*x;
}

expr:@(0,0,0,0,1){a1*$x^2+immediate:c1 + immediate:c2 }{
	new: tmpc = c1+c2;
	return: a1*x^2+tmpc;
}
expr:@(0,0,0,0,1){a1*$x^2+c1 + b2*x }{
	return: a1*x^2+b2*x+ c1;
}
expr:@(0,0,0,0,1){a1*$x^2+immediate:c1 + (b2*x +immediate:c2) }{
	new: tmpc = c1+c2;
	return: a1*x^2+b2*x+ tmpc;
}
expr:@(0,0,0,0,1){immediate:a1*$x^2+immediate:c1 + (immediate:a2*x^2 +immediate:c2) }{
	new: tmpa = a1+a2;
	new: tmpc = c1+c2;
	return: tmpa*x^2 + tmpc;
}


expr:@(0,0,0,0,1){b1*$x+immediate:c1 + (immediate:c2) }{
	new: tmpc = c1+c2;	
	return: b1*x + tmpc;
}
expr:@(0,0,0,0,1){immediate:b1*$x+c1 + (immediate:b2*x) }{
	new: tmpb = b1+b2;
	return: tmpb*x + c1;
}
expr:@(0,0,0,0,1){immediate:b1*$x+immediate:c1 + (immediate:b2*x +immediate:c2) }{
	new: tmpb = b1+b2;
	new: tmpc = c1+c2;	
	return: tmpb*x + tmpc;
}


//4求解公式
@(0,0,0,0,0,10){a*$x^2+b*x+c==0}{
	if(b^2-4*a*c<0){
		x="null";
	}
	else {
		new:x1=(-b+(b^2-4*a*c)^0.5)/(2*a);
		new:x2=(-b-(b^2-4*a*c)^0.5)/(2*a);
		x={x1,x2};	
	}
}
expr:@(0,0,0,0,0,-1){a*$x^2 + b * x == 0}{
	return:a*x^2 + b * x + 0 == 0;	
}
expr:@(0,0,0,0,0,-1){a*$x^2 + c == 0}{
	return:a*x^2 + 0 * x + c == 0;	
}
@(0,0,0,0,0,10){b*$x + c == 0}{
	if(b==0){
		if(c==0){
			x="any";
		}else {
			x="null";
		}
	}else{
		x = -c/b;
	}	
}
expr:@(0,0,0,0,0,10){b*$x == 0}{
	if(b==0){
		x="any";
	}else{
		x = 0;
	}		
}

#file(test);
#line(3);
new:x=1;
 //301-400

$x^2 + 3*$x == 5 + 2*$x ;
  (2*$x + 1)*$x == 3  ;
  4*$x^2 - 5 == $x + 6 ;
  ($x + 4)*($x - 2) == 10-$x  ;
    3*$x^2 - 2*$x == 1 + $x ;
  $x^2 == (3 - $x)*2  ;
  ($x^2 + 5)*2 == 10 ;
  2*$x^2 + 3 == $x + 4*$x ;
  $x*($x - 3) + 4 == 0  ;
  ($x + 1)^2 == $x^2 + 2*$x  ;
  
  
3*$x^2 == 2*($x + 1)  ;
  4*$x^2 - (2 + $x) == $x  ;
 ($x^2 + 2)*3 == $x^2 + $x  ;
  2*($x - 1)^2 == 5*$x  ;
  $x^2 + 4*$x == ($x + 3)*2  ;
 3*($x^2 - 1) == 2*$x + 4  ;
  (2*$x + 3)*$x == 4*$x + 5  ;
 2*$x*($x + 2) == 3*$x^2  ;
  $x^2 - 2*$x == ($x - 4)*3  ;
 ($x + 2)*($x - 3) == $x^2 - $x ;
 
 
  $x^2 + 3*$x == 2*($x + 4)  ;
 2*($x^2 + 1) == $x^2 - $x  ;
 ($x - 3)^2 == $x^2 + 6  ;
 $x*(2*$x + 5) == 3 + $x^2  ;
 4*$x^2 - ($x + 2) == $x  ;
 ($x + 1)*($x - 2) == 5 - $x^2  ;
 2*$x^2 == 3*$x + ($x - 1)  ;
 $x^2 + ($x + 2)*3 == $x  ;
 ($x - 2)*($x + 1) == 4*$x  ;
  3*$x^2 - 4 == $x*($x + 3)  ;
  
  
  ($x^2 + 3)*2 == $x + 7  ;
  $x*($x - 4) == 3*$x^2 - 2  ;
  3*$x^2 + 4 == 2*($x + 3)  ;
  $x^2 - (2*$x - 3) == $x + 5  ;
  4*($x^2 + 1) == $x*($x + 2)  ;
  ($x - 3)*($x + 4) == 2 - $x^2  ;
  2*$x^2 - 5 == ($x - 2)*$x  ;
  $x^2 + 3*$x == 4*($x - 1)  ;
  3*($x^2 - 2) == 2*$x - 1  ;
  ($x + 5)*$x == $x^2 - 3*$x  ;


 $x^2 - 4 == ($x + 2)*($x - 3)  ;
 2*($x^2 + 3) == $x^2 + 4*$x  ;
 $x*($x + 1) == 3*$x^2 + 2  ;
 ($x - 4)^2 == $x^2 + 5  ;
 4*$x^2 == $x*(2 - $x) + 6  ;
 $x^2 + 2*$x == 3*($x + 1)  ;
 ($x + 3)*($x - 1) == $x^2 - $x  ;
 3*$x^2 - 6 == $x*($x + 4)  ;
 $x^2 - (2*$x + 5) == 3  ;
  ($x - 2)*($x + 5) == 3*$x^2  ;
 
 ($x^2 + 3)*2 == $x + 7  ;
  $x*($x - 4) == 3*$x^2 - 2  ;
  3*$x^2 + 4 == 2*($x + 3)  ;
  $x^2 - (2*$x - 3) == $x + 5  ;
  4*($x^2 + 1) == $x*($x + 2)  ;
  ($x - 3)*($x + 4) == 2 - $x^2  ;
  2*$x^2 - 5 == ($x - 2)*$x  ;
  $x^2 + 3*$x == 4*($x - 1)  ;
  3*($x^2 - 2) == 2*$x - 1  ;
  ($x + 5)*$x == $x^2 - 3*$x  ;
  
  $x^2 - 4 == ($x + 2)*($x - 3)  ;
  2*($x^2 + 3) == $x^2 + 4*$x  ;
  $x*($x + 1) == 3*$x^2 + 2  ;
  ($x - 4)^2 == $x^2 + 5  ;
  4*$x^2 == $x*(2 - $x) + 6  ;
  $x^2 + 2*$x == 3*($x + 1)  ;
  ($x + 3)*($x - 1) == $x^2 - $x  ;
  3*$x^2 - 6 == $x*($x + 4)  ;
  $x^2 - (2*$x + 5) == 3  ;
  ($x - 2)*($x + 5) == 3*$x^2  ;


  2*($x^2 + 1) == $x^2 + 3*$x  ;
  $x*($x + 2) == 2*$x^2 + 4  ;
  ($x + 3)*($x - 1) == 3*$x^2 - 2*$x  ;
  4*$x^2 - 3 == $x*($x + 6)  ;
  $x^2 - 2*$x == 3*($x - 2)  ;
  (2*$x - 4)*$x == $x^2 + 5  ;
  3*$x^2 + 5 == 2*($x + 1)  ;
  3*$x^2 + 4*$x == ($x - 3)^2  ;
  2*$x^2 == $x*(3 - $x) + 2  ;
  ($x + 2)^2 == 3*$x + 2*$x^2  ;


$x^2 + 2*$x == 3*($x + 2)  ;
 ($x + 3)^2 == 4*$x + 6 ;
2*$x^2 - 5 == $x*($x - 3)  ;
$x*($x + 4) == 3*$x^2 + 1  ;
3*($x^2 - 1) == 2*$x + 3  ;
 $x^2 - ($x + 5)*2 == $x  ;
 4*$x^2 + 3 == ($x - 2)*$x  ;
($x - 3)*(2*$x + 1) == $x^2  ;
$x^2 + 3*$x == 5 - 2*$x ;
2*($x^2 + 4) == $x^2 + $x ;


 $x^2 + 3*x == 2*(x - 1) ;
($x + 2)^2 == 3*x^2 + 5*x ;
 2*$x^2 - 4 == x*(x + 3) ;
$x*(x - 2) == 3*x^2 - 5;
3*($x^2 - 2) == x + 6;
 $x^2 + (x - 4)*2 == 3 ;
 4*$x^2 + 5 == (x - 1)*x;
 ($x - 3)*(x + 2) == x^2 + 1 ;
 $x^2 + 4*x == 6 - x ;
 2*($x^2 + 3) == x^2 + 2*x ;
